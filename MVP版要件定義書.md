# GAAAGS MVP版 要件定義書

## 1. MVP概要

### 1.1 MVP目的
本格的なシステム開発前に、**コア機能の技術検証**と**ユーザビリティ確認**を行う最小限のプロトタイプを構築する。開発コストを最小限に抑えながら、システムの実現可能性を検証することを目的とする。

### 1.2 MVP範囲
- **含むもの**: 世界観設定 → 2D画像生成 → データ保存の基本フロー
- **含まないもの**: 3D変換、Web UI、高度な品質管理、バッチ処理

### 1.3 成功基準
- [ ] 世界観設定から2D画像生成まで自動実行できる
- [ ] 5個のアセットを連続生成できる
- [ ] 生成データがローカルに適切に保存される
- [ ] 開発期間：1週間以内

## 2. 機能要件（最小限）

### 2.1 対象機能
| 機能 | MVP対応 | 簡略化内容 |
|------|---------|------------|
| 世界観設定 | ✅ | プリセット3種類のみ |
| アセット仕様定義 | ✅ | 固定5種類のアセット |
| プロンプト生成 | ✅ | シンプルなテンプレート |
| 2D画像生成 | ✅ | Gemini Flash 2.0のみ |
| データ保存 | ✅ | JSONファイル + ローカル画像 |
| 3D変換 | ❌ | 後回し |
| Web UI | ❌ | コマンドライン実行 |
| 品質管理 | ❌ | 生成のみ |

### 2.2 世界観設定（簡略版）
**プリセット3種類のみ**
1. **ファンタジー**: 中世風、カートゥーン、明るい色調
2. **SF**: 未来風、リアル、クール色調  
3. **現代**: 現代風、写実的、自然色調

**設定項目**
- 世界観名（自由入力）
- プリセット選択（必須）
- 簡単な説明（任意）

### 2.3 アセット仕様（固定5種類）
**固定アセットリスト**
1. 主人公キャラクター
2. 武器（剣/銃/杖 - 世界観により自動選択）
3. 建物（城/宇宙船/ビル - 世界観により自動選択）
4. 乗り物（馬/宇宙船/車 - 世界観により自動選択）
5. アイテム（宝箱/エネルギーセル/スマホ - 世界観により自動選択）

**簡略化ポイント**
- 優先度は全て同じ
- カスタマイズ不可
- タグは自動付与

### 2.4 プロンプト生成（テンプレート方式）
**基本テンプレート**
```
{art_style} style {asset_name} for a {genre} game, 
{color_palette} color palette, {theme} atmosphere, 
high quality, game asset, white background
```

**世界観別修飾子**
- ファンタジー: "medieval fantasy", "magical", "enchanted"
- SF: "futuristic", "sci-fi", "high-tech"  
- 現代: "modern", "realistic", "contemporary"

### 2.5 画像生成（Gemini Flash 2.0）
**固定設定**
- 画像サイズ: 1024x1024
- 品質: 標準
- 生成数: 1枚/アセット
- エラー時の再試行: 1回のみ

### 2.6 データ保存（ファイルベース）
**保存構造**
```
mvp_output/
├── project_info.json          # プロジェクト情報
├── world_setting.json         # 世界観設定
├── assets/
│   ├── character.png          # 生成画像
│   ├── weapon.png
│   ├── building.png
│   ├── vehicle.png
│   └── item.png
└── generation_log.json        # 生成ログ
```

**JSONスキーマ（最小限）**
```json
{
  "project_info": {
    "name": "string",
    "created_at": "timestamp",
    "world_preset": "fantasy|sci-fi|modern"
  },
  "generation_log": [
    {
      "asset_name": "string",
      "prompt": "string", 
      "status": "success|failed",
      "file_path": "string",
      "generated_at": "timestamp"
    }
  ]
}
```

## 3. 技術要件（簡略版）

### 3.1 開発環境
- **言語**: Python 3.8+
- **必要ライブラリ**: `google-generativeai`, `requests`, `json`, `datetime`
- **実行方式**: コマンドラインスクリプト
- **ファイル構成**: 単一Pythonファイル（200行程度）

### 3.2 動作環境
- **OS**: Windows 10/11
- **ネットワーク**: インターネット接続必須
- **ストレージ**: 100MB程度の空き容量
- **GPU**: 不要（画像生成はクラウドAPI）

### 3.3 外部依存
- **Google Gemini API**: 画像生成用
- **APIキー**: 環境変数で設定

## 4. ユーザーインターフェース（CLI）

### 4.1 実行フロー
```bash
# 1. 基本実行
python gaaags_mvp.py

# 2. 世界観指定実行  
python gaaags_mvp.py --world fantasy --name "魔法の王国"

# 3. 出力先指定
python gaaags_mvp.py --output ./my_project
```

### 4.2 対話式設定
```
=== GAAAGS MVP ===
プロジェクト名を入力してください: 魔法の王国
世界観を選択してください:
1) ファンタジー
2) SF  
3) 現代
選択 (1-3): 1

世界観の説明（任意）: 色とりどりの魔法が存在する平和な王国

生成開始...
[1/5] 主人公キャラクター生成中...
[2/5] 武器生成中...
[3/5] 建物生成中...
[4/5] 乗り物生成中...  
[5/5] アイテム生成中...

完了！出力フォルダ: ./mvp_output/魔法の王国_20250527_143022
```

### 4.3 進捗表示
- シンプルなテキスト進捗表示
- 各アセットの生成状況
- エラー時の簡単なメッセージ

## 5. 非機能要件（最小限）

### 5.1 性能要件
- **総実行時間**: 5分以内（5アセット）
- **メモリ使用量**: 512MB以下
- **API呼び出し**: 最大10回（再試行含む）

### 5.2 信頼性要件
- **エラーハンドリング**: 最低限（APIエラー、ファイル書き込みエラー）
- **ログ記録**: 基本的な実行ログ
- **データ保全**: ローカルファイル保存

### 5.3 使いやすさ
- **学習コスト**: 5分以内でマスター可能
- **エラーメッセージ**: 分かりやすい日本語
- **ドキュメント**: README.md 1ページ

## 6. 制約事項

### 6.1 技術制約
- 3D変換機能なし
- データベース使用なし（SQLiteデータベースは使用しない）
- Web UI なし
- 同時処理なし（順次実行のみ）

### 6.2 機能制約
- アセット種類固定（5種類のみ）
  - ファンタジー：主人公キャラクター、剣、城、森、宝箱
  - SF：宇宙船、レーザー銃、宇宙ステーション、惑星、ロボット
  - 現代：主人公キャラクター、スマートフォン、オフィスビル、車、スマートウォッチ
- 世界観プリセット固定（3種類のみ）
  - ファンタジー：中世風、カートゥーン、明るい色調
  - SF：未来風、リアル、クール色調
  - 現代：現代風、写実的、自然色調
- カスタマイズ機能なし
- 品質管理機能なし

### 6.3 運用制約
- ローカル実行のみ
- 単一ユーザー想定
- プロジェクト管理機能なし

## 7. 開発計画

### 7.1 開発スケジュール（1週間）
| 日 | 作業内容 | 成果物 |
|----|----------|--------|
| 1日目 | 基本設計・環境構築 | 開発環境、基本コード骨格 |
| 2日目 | 世界観設定・プロンプト生成 | 設定機能、テンプレート |
| 3日目 | 画像生成・API統合 | 画像生成機能 |
| 4日目 | データ保存・ファイル管理 | 保存機能、ログ機能 |
| 5日目 | 統合テスト・バグ修正 | 動作確認、修正 |
| 6日目 | ドキュメント作成 | README、使用手順 |
| 7日目 | 最終テスト・リリース準備 | MVP完成版 |

### 7.2 検証項目
- [ ] 各世界観プリセットで正常に画像生成される
- [ ] 5つのアセットが全て生成される
- [ ] 生成データが適切に保存される
- [ ] エラー時に適切なメッセージが表示される
- [ ] 実行時間が5分以内に収まる

## 8. MVP後の展開

### 8.1 学習内容
- **技術的**: Gemini API の特性、プロンプトエンジニアリング
- **ユーザビリティ**: 操作感、生成品質の満足度
- **パフォーマンス**: 実際の実行時間、エラー発生率

### 8.2 次段階への判断基準
**本格開発へ進む条件**
- [ ] MVP で90%以上のアセットが期待通り生成される
- [ ] ユーザーテストで満足度3.5/5.0以上
- [ ] 技術的課題の解決策が明確になる

**改善が必要な場合**
- プロンプトテンプレートの改良
- 世界観設定の見直し  
- API使用方法の最適化

### 8.3 本格版への移行項目
1. **3D変換機能の追加**
2. **Web UIの実装**  
3. **データベース対応**
4. **品質管理機能**
5. **バッチ処理対応**

## 9. リスク管理

### 9.1 主要リスク
| リスク | 確率 | 影響 | 対策 |
|--------|------|------|------|
| API制限に到達 | 中 | 高 | 使用量監視、制限内での実行 |
| 生成品質が低い | 高 | 中 | プロンプト改良、複数パターン試行 |
| 実行時間超過 | 中 | 低 | タイムアウト設定、段階的実行 |

### 9.2 緊急時対応
- **API エラー**: 再試行1回、失敗時はログ記録して継続
- **ファイル保存エラー**: 代替パスで保存試行
- **予期しないエラー**: エラー詳細をログ出力、安全に終了

## 10. 成果物定義

### 10.1 必須成果物
1. **実行ファイル**: `gaaags_mvp.py`
2. **設定ファイル**: `config.json`（APIキー等）
3. **ドキュメント**: `README.md`
4. **サンプル出力**: 実際に生成したアセット一式

### 10.2 評価レポート
- 実行時間の計測結果
- 生成品質の主観評価
- 発生した問題とその解決方法
- 本格版への推奨事項

## 11. 付録

### 11.1 ファイル構成例
```
gaaags_mvp/
├── gaaags_mvp.py           # メインスクリプト
├── config.json             # 設定ファイル
├── README.md               # 使用説明書
├── requirements.txt        # 依存ライブラリ
└── samples/                # サンプル出力
    └── fantasy_project/    # サンプルプロジェクト
```

### 11.2 主要コード構造
```python
class WorldPreset:
    # 世界観プリセット管理
    
class AssetGenerator:
    # アセット生成管理
    
class PromptBuilder:
    # プロンプト構築
    
class GeminiImageGenerator:
    # 画像生成
    
class FileManager:
    # ファイル保存・管理
    
def main():
    # メイン実行ロジック
```

このMVPにより、最小限のコストで技術検証を行い、本格開発に向けた具体的な方向性を決定できます。